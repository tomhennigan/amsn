subdirs		= src
TKCXIMAGE_FILE	= @TKCXIMAGE_FILE@

.PHONY : all test check clean distclean

all : 
	for i in ${subdirs}; do cd $$i && make all && cd ../; done
	cp src/${TKCXIMAGE_FILE} ./

test : check

check : all
	wish demos/demo.tcl || true

clean : 
	for i in ${subdirs}; do cd $$i && make clean && cd ../; done
	rm -f ${TKCXIMAGE_FILE} pkgIndex.tcl

distclean :
	for i in ${subdirs}; do cd $$i && make distclean && cd ../; done
	rm -rf Makefile config.* *~ autom4te.cache 2>/dev/null | true
	rm -f ${TKCXIMAGE_FILE} pkgIndex.tcl